â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                                â•‘
â•‘            ğŸ“ GUÃA RÃPIDA - ACTUALIZACIÃ“N DE CAMBIOS                          â•‘
â•‘                                                                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸ”„ FLUJO DE TRABAJO DIARIO

Cuando hagas cambios en tu cÃ³digo Django:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OPCIÃ“N 1: Script Automatizado (Recomendado) â­                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```powershell
.\update-apprunner-service.ps1
```

Este script hace TODO automÃ¡ticamente:
  âœ… Construye nueva imagen Docker
  âœ… Sube la imagen a ECR
  âœ… Inicia despliegue en App Runner
  âœ… Monitorea el progreso
  âœ… Te muestra la URL cuando termina

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OPCIÃ“N 2: Paso a Paso (Manual)                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```powershell
# 1. Construir y subir imagen
.\deploy-to-ecr.ps1

# 2. Desplegar en App Runner
aws apprunner start-deployment `
  --service-arn arn:aws:apprunner:us-east-1:851725478821:service/si2-condominium-prod/7e554faed3424ab4b5f00af4b540db3c `
  --region us-east-1
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## â±ï¸ TIEMPOS ESTIMADOS

```
Paso 1: Build imagen Docker      â†’ 2-5 minutos
Paso 2: Push a ECR                â†’ 1-2 minutos
Paso 3: Deploy en App Runner      â†’ 2-5 minutos
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL:                             5-12 minutos
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ“Š INFORMACIÃ“N DE TU SERVICIO

**Nombre:**     si2-condominium-prod
**RegiÃ³n:**     us-east-1
**Account ID:** 851725478821

**Service ARN:**
```
arn:aws:apprunner:us-east-1:851725478821:service/si2-condominium-prod/7e554faed3424ab4b5f00af4b540db3c
```

**Repositorio ECR:**
```
851725478821.dkr.ecr.us-east-1.amazonaws.com/si2-condominium-be
```

**Rol IAM:**
```
vpay-smartdoc-apprunner-instance-role
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ¯ COMANDOS ÃšTILES

### Ver estado del servicio:
```powershell
aws apprunner describe-service `
  --service-arn arn:aws:apprunner:us-east-1:851725478821:service/si2-condominium-prod/7e554faed3424ab4b5f00af4b540db3c `
  --region us-east-1 `
  --query 'Service.Status'
```

### Ver URL del servicio:
```powershell
aws apprunner describe-service `
  --service-arn arn:aws:apprunner:us-east-1:851725478821:service/si2-condominium-prod/7e554faed3424ab4b5f00af4b540db3c `
  --region us-east-1 `
  --query 'Service.ServiceUrl' `
  --output text
```

### Ver logs:
```powershell
aws logs tail /aws/apprunner/si2-condominium-prod/service --follow --region us-east-1
```

### Pausar servicio (ahorrar costos):
```powershell
aws apprunner pause-service `
  --service-arn arn:aws:apprunner:us-east-1:851725478821:service/si2-condominium-prod/7e554faed3424ab4b5f00af4b540db3c `
  --region us-east-1
```

### Reanudar servicio:
```powershell
aws apprunner resume-service `
  --service-arn arn:aws:apprunner:us-east-1:851725478821:service/si2-condominium-prod/7e554faed3424ab4b5f00af4b540db3c `
  --region us-east-1
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ” VERIFICAR DESPLIEGUE

DespuÃ©s de actualizar, verifica que todo funcione:

```powershell
# 1. Health check
curl https://TU-URL.us-east-1.awsapprunner.com/health/

# 2. Swagger UI
# Abre en navegador: https://TU-URL.us-east-1.awsapprunner.com/api/docs/

# 3. Admin panel
# Abre en navegador: https://TU-URL.us-east-1.awsapprunner.com/admin/
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ› TROUBLESHOOTING

### Problema: "Build failed"
âœ Verifica errores en el Dockerfile
âœ AsegÃºrate de que requirements.txt estÃ© actualizado
âœ Prueba build local: `docker build -t test .`

### Problema: "Push to ECR failed"
âœ Verifica credenciales AWS: `aws sts get-caller-identity`
âœ Verifica permisos ECR
âœ Re-autentica: `aws ecr get-login-password ...`

### Problema: "Deployment stuck"
âœ Revisa logs en CloudWatch
âœ Verifica health check endpoint: `/health/`
âœ Verifica variables de entorno en App Runner

### Problema: "Service failing to start"
âœ Revisa logs: `aws logs tail /aws/apprunner/...`
âœ Verifica que el puerto sea 8000
âœ Verifica conexiÃ³n a base de datos
âœ Verifica rol IAM asignado

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ“ BUENAS PRÃCTICAS

### âœ… HACER:
1. Probar cambios localmente antes de desplegar
2. Usar tags de versiÃ³n: `.\deploy-to-ecr.ps1 -ImageTag "v1.0.2"`
3. Revisar logs despuÃ©s de cada despliegue
4. Hacer backup de la base de datos antes de cambios grandes
5. Usar el script automatizado `update-apprunner-service.ps1`

### âŒ NO HACER:
1. Desplegar cÃ³digo sin probar
2. Hacer cambios directamente en producciÃ³n
3. Olvidar actualizar requirements.txt
4. Ignorar errores en los logs
5. Desplegar con DEBUG=True

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ¬ EJEMPLO DE FLUJO COMPLETO

```powershell
# 1. Hacer cambios en el cÃ³digo
# ... editas archivos Python ...

# 2. Probar localmente
.\env\Scripts\Activate.ps1
cd be_condominium
python manage.py runserver
# Probar en: http://localhost:8000

# 3. Si todo funciona, desplegar
cd ..
.\update-apprunner-service.ps1

# 4. Esperar 5-10 minutos

# 5. Verificar
curl https://TU-URL.awsapprunner.com/health/
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ’° GESTIÃ“N DE COSTOS

### Pausar servicio cuando no lo uses:
```powershell
# Pausar (solo pagas por storage de imagen ECR)
aws apprunner pause-service --service-arn TU_ARN --region us-east-1

# Reanudar (toma ~2 minutos)
aws apprunner resume-service --service-arn TU_ARN --region us-east-1
```

### Eliminar servicio (si ya no lo necesitas):
```powershell
aws apprunner delete-service --service-arn TU_ARN --region us-east-1
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ“š ARCHIVOS DE REFERENCIA

- `update-apprunner-service.ps1` - Script de actualizaciÃ³n (USA ESTE)
- `deploy-to-ecr.ps1`            - Solo construir y subir imagen
- `create-apprunner-service.ps1` - Crear servicio (ya ejecutado)
- `verify-iam-role.ps1`          - Verificar permisos
- `STEP_BY_STEP.md`              - GuÃ­a completa de despliegue

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## âœ… RESUMEN

**Para actualizar tu aplicaciÃ³n:**

```powershell
.\update-apprunner-service.ps1
```

**Eso es todo.** El script hace el resto. âœ¨

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
